!function(e){var a={};function r(c){if(a[c])return a[c].exports;var n=a[c]={i:c,l:!1,exports:{}};return e[c].call(n.exports,n,n.exports,r),n.l=!0,n.exports}r.m=e,r.c=a,r.d=function(e,a,c){r.o(e,a)||Object.defineProperty(e,a,{configurable:!1,enumerable:!0,get:c})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var a=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(a,"a",a),a},r.o=function(e,a){return Object.prototype.hasOwnProperty.call(e,a)},r.p="",r(r.s=0)}([function(e,a,r){"use strict";r.r(a);a.default=angular.module("ovh-angular-http",[]).provider("OvhHttp",function(){var e=this;e.rootPath="",e.clearCacheVerb=[],e.returnSuccessKey=null,e.returnErrorKey=null,e.$get=["$http","$q","$rootScope","$cacheFactory",function(a,r,c,n){var t={cache:{},cacheTTL:{},schema:function(c,n){return a.get(angular.isObject(n)&&angular.isDefined(n.rootPath)&&null!==n.rootPath?n.rootPath:e.rootPath+c,{cache:!0}).then(function(e){return e.data},function(e){return r.reject(e)})},models:function(e,a,c){return t.schema(e,c).then(function(e){return a?e.models[a]?e.models[a].enum:r.reject(e.models):e.models})},encode:function(e){return window.encodeURIComponent(e)}};return angular.forEach(["get","put","post","delete","patch"],function(l){t[l]=function(o,u){var h=u;if(angular.isObject(h)||(h={}),h.method=angular.uppercase(l),h.url=(angular.isDefined(h.rootPath)&&null!==h.rootPath?h.rootPath:e.rootPath)+o,angular.isDefined(h.returnSuccessKey)){if(!angular.isString(h.returnSuccessKey))throw"returnSuccessKey must be string"}else h.returnSuccessKey=e.returnSuccessKey;if(angular.isDefined(h.returnErrorKey)){if(!angular.isString(h.returnErrorKey))throw"returnErrorKey must be string"}else h.returnErrorKey=e.returnErrorKey;return function(l){!0===l.encodeParams&&angular.forEach(l.params,function(a,r){l.params[r]=e.encode(a)}),!0===l.encodeUrlParams&&angular.forEach(l.urlParams,function(a,r){l.urlParams[r]=e.encode(a)});var o=URI.expand(l.url,l.urlParams||{}).search(l.params||{}).toString(),u=l.data?angular.toJson(l.data):{};if(angular.isDefined(l.cache)&&(!angular.isString(l.cache)||""===l.cache))throw"cache must be string (not empty)";if(angular.isDefined(l.cacheTTL)&&!angular.isNumber(l.cacheTTL))throw"cacheTTL must be number (milliseconds)";if(angular.isDefined(l.clearAllCache)&&!(angular.isString(l.clearAllCache)&&""!==l.clearAllCache||angular.isArray(l.clearAllCache)||!0===l.clearAllCache||!1===l.clearAllCache))throw"clearAllCache must be array of string (not empty), string or boolean";if(angular.isDefined(l.clearCache)&&!(angular.isString(l.clearCache)&&""!==l.clearCache||angular.isArray(l.clearCache)||!0===l.clearCache||!1===l.clearCache))throw"clearCache must be array of string (not empty), string or boolean";if(l.cache&&angular.isUndefined(t.cache[l.cache])&&(t.cache[l.cache]=n(l.cache),t.cacheTTL[l.cache]={}),angular.isDefined(l.clearAllCache)&&null!==l.clearAllCache&&!1!==l.clearAllCache&&(!0===l.clearAllCache&&angular.isDefined(l.cache)?(t.cache[l.cache].removeAll(),t.cacheTTL[l.cache]={}):angular.isArray(l.clearAllCache)?angular.forEach(l.clearAllCache,function(e){if(angular.isDefined(e)&&(!angular.isString(e)||""===e))throw"clearAllCache must be array of string (not empty), string or boolean";t.cache[e]&&(t.cache[e].removeAll(),t.cacheTTL[e]={})}):t.cache[l.clearAllCache]&&(t.cache[l.clearAllCache].removeAll(),t.cacheTTL[l.clearAllCache]={})),angular.isDefined(l.clearCache)&&null!==l.clearCache&&!1!==l.clearCache&&(!0===l.clearCache&&angular.isDefined(l.cache)?(t.cache[l.cache].remove(o),delete t.cacheTTL[l.cache][o]):angular.isArray(l.clearCache)?angular.forEach(l.clearCache,function(e){if(angular.isDefined(e)&&(!angular.isString(e)||""===e))throw"clearCache must be array of string (not empty), string or boolean";t.cache[e]&&(t.cache[e].remove(o),delete t.cacheTTL[e][o])}):t.cache[l.clearCache]&&(t.cache[l.clearCache].remove(o),delete t.cacheTTL[l.clearCache][o])),l.cache&&-1!==_.indexOf(angular.isDefined(l.clearCacheVerb)&&null!==l.clearCacheVerb?l.clearCacheVerb:e.clearCacheVerb,angular.uppercase(l.method))&&(t.cache[l.cache].remove(o),delete t.cacheTTL[l.clearCache][o]),l.cache&&l.cacheTTL&&"get"===l.method.toLowerCase()){var h=Date.now();t.cacheTTL[l.cache]&&t.cacheTTL[l.cache][o]?t.cacheTTL[l.cache][o]<h&&(t.cache[l.cache].remove(o),t.cacheTTL[l.cache][o]=h+l.cacheTTL):t.cacheTTL[l.cache][o]=h+l.cacheTTL}return a({method:l.method,url:o,data:u,serviceType:l.serviceType,timeout:l.timeout,headers:l.headers,cache:!("get"!==l.method.toLowerCase()||!t.cache[l.cache])&&t.cache[l.cache]}).then(function(e){return l.broadcast&&(l.broadcastParam?c.$broadcast(l.broadcast,l.broadcastParam,e):c.$broadcast(l.broadcast,e)),angular.isString(l.returnSuccessKey)&&""!==l.returnSuccessKey?e[l.returnSuccessKey]:e},function(e){return angular.isString(l.returnErrorKey)&&""!==l.returnErrorKey?r.reject(e[l.returnErrorKey]):r.reject(e)})}(h)}}),t}]}).name}]);